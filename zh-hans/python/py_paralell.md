# Python并行度你所需要知道的

在MLSQL中，你可以直接使用Python对表进行处理。你可能已经注意到，
我们经常会在处理前，使用`!tableRepartition` 对数据进行重新切分。

比如：

```shell
!tableRepartition _ -i simpleDataTemp -num 3 -o simpleData;
!ray on simpleData py.wow1 named mlsql_temp_table2;
```

这里，在处理表 simpleDataTemp 之前，我们将其重新划分成3个分区的新表
simpleData。 之后才交给python代码进行处理。

那么做这件事的理由是什么呢？

## 资源

以上面的分区数3为例：


如果你没有使用Ray,那么你的集群需要  3+1 个 核,才能让代码正常运行。这意味着如果你的分区过大，
而集群比较繁忙或者资源较少，很可能无法正确运行。

如果你使用了Ray,那么需要保证Ray至少有3个CPU资源。集群需要保证至少 3+3 个资源。否则也可能无法正常的运行任务。


## 效率

理论上分区越大速度越快。但是他会受到资源的制约。

## 自动化

尽管你可能设置了3个分区，但集群不保证一定按三个分区运行，除非资源足够。所谓足够是指，集群剩余可使用资源核数 > 3 * 2.

假设你的剩余资源为N，你设置的分区数的> N/2，那么系统会调整为 N/2-1, 如果你的设置分区数小于 N/2,则会按照你的设置运行。


